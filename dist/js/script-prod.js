(()=>{"use strict";const e=(e,t,n,o)=>{let l=1,s=!1;const c=document.querySelectorAll(e);function a(e){e>c.length&&(l=1),e<1&&(l=c.length),c.forEach((e=>{e.classList.add("animated"),e.style.display="none"})),c[l-1].style.display="block"}function i(e){a(l+=e)}a(a);try{const e=document.querySelector(n),t=document.querySelector(o);e.addEventListener("click",(()=>{i(-1),c[l-1].classList.remove("slideInRight"),c[l-1].classList.add("slideInLeft")})),t.addEventListener("click",(()=>{i(1),c[l-1].classList.remove("slideInLeft"),c[l-1].classList.add("slideInRight")}))}catch(e){}function r(){s="vertical"===t?setInterval((function(){i(1),c[l-1].classList.add("fadeIn")}),5e3):setInterval((function(){i(1),c[l-1].classList.remove("slideInLeft"),c[l-1].classList.add("slideInRight")}),5e3)}r(),c[0].parentNode.addEventListener("mouseenter",(()=>{clearInterval(s)})),c[0].parentNode.addEventListener("mouseleave",(()=>{r()}))},t=e=>{function t(e){let t="+7 (___) ___-__-__",n=0,o=t.replace(/\D/g,""),l=this.value.replace(/\D/g,"").replace(/^8/,"7").replace(/^9/,"79");o.length>=l.length&&(l=o),this.value=t.replace(/./g,(function(e){return/[_\d]/.test(e)&&n<l.length?l.charAt(n++):n>=l.length?"":e})),e.target.hasAttribute("inputmode")||e.target.setAttribute("inputmode","numeric"),"blur"===e.type?2==this.value.length?this.value="":function(e){11!==e.value.replace(/\D/g,"").length?console.log("Номер введен не полностью"):console.log("Номер введен корректно")}(this):((e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}})(this.value.length,this)}document.querySelectorAll(e).forEach((e=>{e.addEventListener("input",t),e.addEventListener("focus",t),e.addEventListener("blur",t),e.addEventListener("click",t)}))},n=e=>{document.querySelectorAll(e).forEach((e=>{e.addEventListener("keypress",(function(e){e.key.match(/[^а-яё 0-9]/gi)&&e.preventDefault()}))}))},o=(e,t,n)=>{const o=document.querySelectorAll(t),l=document.querySelector(e);o.forEach((e=>{e.remove()})),l.addEventListener("click",(function(){(async e=>{const t=await fetch(e);if(!t.ok)throw new Error(`Could not fetch ${e}, status: ${t.status}`);return await t.json()})("data/db.json").then((e=>{e.styles.forEach((({src:e,title:t,link:o})=>{let l=document.createElement("div");l.classList.add("animated","fadeInUp","col-sm-3","col-sm-offset-0","col-xs-10","col-xs-offset-1"),l.innerHTML=`\n                <div class="styles-block">\n                    <img src="${e}" alt="style">\n                    <h4>${t}</h4>\n                    <a href="${o}">Подробнее</a>\n                </div>\n            `,document.querySelector(n).appendChild(l)})),this.style.cssText="\n                    opacity: 0;\n                    pointer-events: none;\n                "})).catch((e=>{console.log(e),this.textContent="Не получилось загрузить. Попробуйте снова",setTimeout((()=>{this.textContent="Посмотреть больше стилей"}),5e3)})).finally()}))},l=e=>{const t=document.querySelectorAll(e);let n;t.forEach((e=>{e.addEventListener("click",(function(){this.classList.add("active"),this.nextElementSibling.classList.add("active-content"),n&&(n.classList.remove("active"),n.nextElementSibling.classList.remove("active-content")),n=n===this?0:this}))})),t[0]?.click()},s=e=>{const t=document.documentElement,n=document.body,o=document.querySelector(e);let l=document.querySelectorAll('[href^="#"]');window.addEventListener("scroll",(()=>{Math.round(t.scrollTop||n.scrollTop)>1650?(o.classList.add("animated","fadeIn"),o.classList.remove("fadeOut")):(o.classList.add("fadeOut"),o.classList.remove("fadeIn"))})),l.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();let o=this.hash;""!=o&&function(e,o,l=!1,s=!1){let c=window.scrollY,a=document.querySelector(o),i=c+a.getBoundingClientRect().top,r=Math.round(t.scrollHeight||n.scrollHeight),d=(r-i<window.innerHeight?r-window.innerHeight:i)-c,u=null;d&&requestAnimationFrame((function t(n){s||(s=1500),null===u&&(u=n);let a=n-u,i=(m=Math.min(a/s,1))<.5?4*m*m*m:(m-1)*(2*m-2)*(2*m-2)+1,r=c+d*i;var m;window.scrollTo(0,r),a<s?requestAnimationFrame(t):l&&!e.hasAttribute("data-no-hash")&&(location.hash=o)}))}(this,o)}))}))};window.addEventListener("DOMContentLoaded",(()=>{let c={};var a;(()=>{let e=!1;function t(t,o,l,s=!0,c=!1){const a=document.querySelectorAll(t),i=document.querySelector(o),r=document.querySelector(l),d=document.querySelectorAll("[data-modal]"),u=n();a.forEach((t=>{t.addEventListener("click",(n=>{n.target&&n.preventDefault(),e=!0,c&&t.remove(),d.forEach((e=>{e.style.display="none",e.classList.add("animated","fadeIn")})),i.style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=`${u}px`}))})),r.addEventListener("click",(()=>{d.forEach((e=>{e.style.display="none"})),document.body.style.overflow="",document.body.style.marginRight="0px"})),i.addEventListener("click",(e=>{e.target===i&&s&&(d.forEach((e=>{e.style.display="none"})),document.body.style.overflow="",document.body.style.marginRight="0px")}))}function n(){let e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t}t(".button-design",".popup-design",".popup-design .popup-close"),t(".button-consultation",".popup-consultation",".popup-consultation .popup-close"),t(".fixed-gift",".popup-gift",".popup-gift .popup-close",!1,!0),window.addEventListener("scroll",(()=>{let t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);!e&&window.scrollY+document.documentElement.clientHeight>=t-1&&document.querySelector(".fixed-gift").click()})),setTimeout((function(){let e;if(document.querySelectorAll("[data-modal]").forEach((t=>{"none"!==getComputedStyle(t).display&&(e="block")})),!e){document.querySelector(".popup-consultation").style.display="block",document.body.style.overflow="hidden";let e=n();document.body.style.marginRight=`${e}px`}}),6e4)})(),e(".feedback-slider-item","horizontal",".main-prev-btn",".main-next-btn"),e(".main-slider-item","vertical"),(e=>{const t=document.querySelectorAll("form"),n=document.querySelectorAll("input"),o=document.querySelectorAll('[name="upload"]');o.forEach((e=>{e.addEventListener("input",(()=>{let t;console.log(e.files[0]);const n=e.files[0].name.split(".");t=n[0].length>6?"...":".";const o=n[0].substring(0,6)+t+n[1];e.previousElementSibling.textContent=o}))})),t.forEach((t=>{t.addEventListener("submit",(l=>{l.preventDefault();let s=document.createElement("div");s.classList.add("status"),t.parentNode.appendChild(s),t.classList.add("animated","fadeOutUp"),setTimeout((()=>{t.style.display="none"}),400);let c=document.createElement("img");c.setAttribute("src","assets/img/spinner.gif"),c.classList.add("animated","fadeInUp"),s.appendChild(c);let a=document.createElement("div");a.textContent="Загрузка...",s.appendChild(a);const i=new FormData(t);let r;if(r=t.closest(".popup-design")||t.classList.contains("calc_form")?"http://localhost:3000/designer":"http://localhost:3000/question",t.classList.contains("calc_form"))for(let t in e)i.append(t,e[t]);(async(e,t)=>{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:t});return await n.json()})(r,JSON.stringify(Object.fromEntries(i.entries()))).then((e=>{console.log(e),c.setAttribute("src","assets/img/ok.png"),a.textContent="Спасибо! Скоро мы с вами свяжемся",n.forEach((e=>{e.value=""})),o.forEach((e=>{e.previousElementSibling.textContent="Файл не выбран"}))})).catch((()=>{c.setAttribute("src","assets/img/fail.png"),a.textContent="Что-то пошло не так..."})).finally((()=>{setTimeout((()=>{s.remove(),t.style.display="block",t.classList.remove("fadeOutUp"),t.classList.add("fadeInUp")}),5e3)}))}))}))})(c),t('[name="phone"]'),n('[name="name"]'),n('[name="message"]'),o(".button-styles",".styles-2","#styles .row"),((e,t,n,o,l,s)=>{const c=document.querySelector(e),a=document.querySelector(t),i=document.querySelector(n),r=document.querySelector(o),d=document.querySelector(l);let u=0;const m=e=>{u=Math.round(+c.value*+a.value+ +i.value);let t,n=e.target;"change"===e.type&&(+n.value?s[n.id]=`${n.options[n.selectedIndex].text}: ${n.value}`:delete s[n.id]),""==c.value||""==a.value?(d.textContent="Пожалуйста, выберите размер и материал картины",delete s.sum):"IWANTPOPART"===r.value?(t=`${Math.round(.7*u)} ₽`,s.sum=`${t} cо скидкой`,d.textContent=t):(t=`${u} ₽`,s.sum=t,d.textContent=t)};c.addEventListener("change",m),a.addEventListener("change",m),i.addEventListener("change",m),r.addEventListener("input",m)})("#size","#material","#options",".promocode",".calc-price",c),((e,t,n)=>{let o;const l=document.querySelector(e),s=document.querySelector(t),c=document.querySelector(n);function a(e,t=!1){let n=["active","animated","fadeIn"];"remove"===t?e.classList.remove(...n):e.classList.add(...n)}l.addEventListener("click",(e=>{let t=e.target;var n;t&&"LI"==t.tagName&&(t.parentNode.querySelectorAll("li").forEach((e=>a(e,"remove"))),o=t.className,t.classList.add("active"),n=o,s.querySelector(`.${n}`)?a(c,"remove"):a(c),s.querySelectorAll("div").forEach((e=>{a(e,"remove"),e.classList.contains(n)&&a(e)})))})),l.querySelectorAll("li")[0]?.click()})(".portfolio-menu",".portfolio-wrapper",".portfolio-no"),a=".sizes-block",document.querySelectorAll(a).forEach((e=>{e.addEventListener("mouseover",(()=>{!function(e){const t=e.querySelector("img");t.src=t.src.slice(0,-4)+"-1.png",e.querySelectorAll("p:not(.sizes-hit)").forEach((e=>{e.style.display="none"}))}(e)})),e.addEventListener("mouseout",(()=>{!function(e){const t=e.querySelector("img");t.src=t.src.slice(0,-6)+".png",e.querySelectorAll("p:not(.sizes-hit)").forEach((e=>{e.style.display="block"}))}(e)}))})),l(".accordion-heading"),((e,t)=>{const n=document.querySelector(e),o=document.querySelector(t),l=()=>n.style.display="none",s=e=>{let t=e.type;"click"===t&&window.screen.availWidth<993||"mouseover"===t?"none"==n.style.display?n.style.display="block":l():("resize"===t&&window.screen.availWidth>992||"mouseout"===t)&&l()};o.addEventListener("click",s),o.parentNode.addEventListener("mouseover",s),o.parentNode.addEventListener("mouseout",s),window.addEventListener("resize",s),l()})(".burger-menu",".burger"),s(".pageup"),(()=>{const e=document.querySelectorAll('[name="upload"]');function t(e){e.preventDefault(),e.stopPropagation()}["dragenter","dragleave","dragover","drop"].forEach((n=>{e.forEach((e=>{e.addEventListener(n,t,!1)}))})),["dragenter","dragover"].forEach((t=>{e.forEach((e=>{e.addEventListener(t,(()=>{e.closest(".file_upload").classList.add("drop-area-active")}),!1)}))})),["dragleave","drop"].forEach((t=>{e.forEach((e=>{e.addEventListener(t,(()=>{e.closest(".file_upload").classList.remove("drop-area-active")}),!1)}))})),e.forEach((e=>{e.addEventListener("drop",(t=>{let n;e.files=t.dataTransfer.files;const o=e.files[0].name.split(".");n=o[0].length>6?"...":".";const l=o[0].substring(0,6)+n+o[1];e.previousElementSibling.textContent=l}))}))})()}))})();